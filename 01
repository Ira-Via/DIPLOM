# Этап 1: Подготовка окружения
1. Изучение документации:
  - Ознакомьтесь с документацией Yandex Cloud, Terraform и Ansible.
  - Прочитайте инструкцию по экономии облачных ресурсов, чтобы избежать лишних затрат.
2. Настройка рабочего окружения:
  - Убедитесь, что у вас установлен Terraform и Ansible.
  - Настройте свой локальный компьютер для работы с Yandex Cloud (установите Yandex Cloud CLI и настройте доступ).
3. Создание репозитория:
  - Создайте новый репозиторий на GitHub для хранения вашего кода и документации.
# Этап 2: Разработка инфраструктуры с помощью Terraform
1. Создание VPC:
  - Определите и создайте VPC с необходимыми подсетями (публичная и приватная).
2. Создание виртуальных машин:
  - Используйте Terraform для создания двух ВМ для веб-серверов в приватной подсети.
  - Убедитесь, что ВМ имеют минимальные конфигурации (2 ядра, 2-4 ГБ ОЗУ, 10 ГБ HDD).
3. Создание Bastion Host:
  - Создайте Bastion Host в публичной подсети для доступа к вашим ВМ.
4. Создание балансировщика нагрузки:
  - Определите и создайте балансировщик нагрузки, который будет распределять трафик между вашими веб-серверами.
5. Создание других ВМ:
  - Создайте ВМ для Zabbix, Elasticsearch и Kibana в соответствии с требованиями.
6. Настройка Security Groups:
  - Настройте правила безопасности для всех ВМ, чтобы разрешить доступ только к необходимым портам.
7. Создание NAT-шлюза:
  - Настройте NAT-шлюз для обеспечения доступа к интернету для ВМ в приватной подсети.
# Этап 3: Конфигурация серверов с помощью Ansible
1. Создание playbook для установки Nginx:
  - Напишите playbook для установки и настройки Nginx на веб-серверах.
2. Создание playbook для установки Zabbix Agent:
  - Напишите playbook для установки Zabbix Agent на все ваши ВМ.
3. Создание playbook для установки Elasticsearch и Kibana:
  - Напишите playbook для установки и настройки Elasticsearch и Kibana.
4. Настройка Filebeat:
  - Установите и настройте Filebeat на веб-серверах для отправки логов в Elasticsearch.
# Этап 4: Мониторинг и резервное копирование
1. Настройка Zabbix:
  - Настройте Zabbix для мониторинга ваших ВМ и создайте дешборды с метриками.
2. Настройка резервного копирования:
  - Настройте создание снимков (snapshots) дисков всех ВМ с ограничением времени жизни в неделю и ежедневным копированием.
# Этап 5: Тестирование и деплой
1. Тестирование инфраструктуры:
  - Проверьте доступность вашего сайта через балансировщик нагрузки с помощью curl.
  - Убедитесь, что все метрики мониторинга отображаются корректно.
2. Подготовка к сдаче:
  - Оформите документацию в репозитории, описав все ваши решения и компромиссы.
  - Убедитесь, что доступ к репозиторию открыт.
# Этап 6: Дополнительные улучшения (по желанию)
- Реализация разделения компонентов Zabbix.
- Автоматическое масштабирование для Instance Group.
- Настройка HTTPS с помощью Yandex Certificate Manager.
